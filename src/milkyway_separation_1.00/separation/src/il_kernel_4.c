/*
 *  Copyright (c) 2010-2011 Matthew Arsenault
 *  Copyright (c) 2010-2011 Rensselaer Polytechnic Institute
 *
 *  This file is part of Milkway@Home.
 *
 *  Milkway@Home is free software: you may copy, redistribute and/or modify it
 *  under the terms of the GNU General Public License as published by the
 *  Free Software Foundation, either version 3 of the License, or (at your
 *  option) any later version.
 *
 *  This file is distributed in the hope that it will be useful, but
 *  WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include "il_kernels.h"

const char* ilKernelSrc4 =
"il_cs_2_0\n"
"dcl_num_thread_per_group 64\n"
"; 4 stream kernel\n"
"dcl_cb cb0[15]  ; Constant buffer that holds ABI data\n"
"dcl_cb cb1[15]  ; Kernel arguments\n"
"dcl_cb cb2[72]  ; I'm guessing the math constants AMD uses\n"
"dcl_cb cb3[8]   ; ap constants\n"
"dcl_cb cb4[16]  ; stream constants\n"
"dcl_cb cb5[128] ; sg_dx\n"
"dcl_raw_uav_id(%d)\n"
"dcl_literal l0, 0x0, 0x0, 0x0, 0x0\n"
"dcl_literal l12, 0x0, 0x3fe00000, 0x0, 0x0\n"
"dcl_literal l8, 0x0, 0x3fe80000, 0x0, 0x0\n"
"dcl_literal l10, 0x0, 0x3ff00000, 0x0, 0x0\n"
"dcl_literal l9, 0x0, 0xbfb00000, 0x0, 0x0\n"
"dcl_literal l19, 0x0, 0xbfe00000, 0x0, 0x0\n"
"dcl_literal l7, 0x0, 0xc0080000, 0x0, 0x0\n"
"dcl_literal l4, 0x1, 0x0, 0x0, 0x0\n"
"dcl_literal l5, 0x2, 0x0, 0x0, 0x0\n"
"dcl_literal l6, 0x3, 0x0, 0x0, 0x0\n"
"dcl_literal l3, 0x8, 0x0, 0x0, 0x0\n"
"dcl_literal l2, 0x10, 0x0, 0x0, 0x0\n"
"dcl_literal l18, 0x389cefdd, 0x3fabf3e7, 0x0, 0x0\n"
"dcl_literal l16, 0x47900215, 0x3f33185f, 0x0, 0x0\n"
"dcl_literal l14, 0x4d1d3b2f, 0x3ef52b5c, 0x0, 0x0\n"
"dcl_literal l11, 0x652b82fe, 0x3ff71547, 0x0, 0x0\n"
"dcl_literal l20, 0x667f3bcd, 0x3ff6a09e, 0x0, 0x0\n"
"dcl_literal l13, 0xb649a8f5, 0x3f84aa4e, 0x0, 0x0\n"
"dcl_literal l17, 0xd100e689, 0x3e8657cd, 0x0, 0x0\n"
"dcl_literal l15, 0xfefa39ec, 0x3fe62e42, 0x0, 0x0\n"
"dcl_literal l1, 0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff\n"
"dcl_arena_uav_id(8)\n"
"mov r17.x,cb3[1].x\n"
"mov r18.x,cb3[1].y\n"
"iadd r21.x,vAbsTid.x,cb0[6].x\n"
"mov r22.x,r21.x\n"
"inegate r23.x,cb1[9].x\n"
"iadd r24.x,r22.x,r23.x\n"
"mov r27.x,r24.x\n"
"umod r28.x,r27.x,cb1[11].x\n"
"mov r31.x,r28.x\n"
"udiv r32.x,r27.x,cb1[11].x\n"
"mov r35.x,r32.x\n"
"mov r36.x,l2.x\n"
"mov r38.x,l3.x\n"
"ult r43.x,r35.x,cb1[10].x\n"
"ult r40.x,r31.x,cb1[11].x\n"
"iand r46.x,r43.x,r40.x\n"
"mov r49.x,r46.x\n"
"if_logicalnz r49.x\n"
"mov r50.xy,l0.xy\n"
";Zero streams\n"
"mov r52.xy,l0.xy\n"
"mov r54.xy,r52.xy\n"
"mov r55.xy,l0.xy\n"
"mov r57.xy,r55.xy\n"
"mov r58.xy,r54.xy\n"
"mov r59.xy,l0.xy\n"
"mov r61.xy,r59.xy\n"
"mov r62.xy,r58.xy\n"
"mov r63.xy,r57.xy\n"
"mov r64.xy,l0.xy\n"
"mov r66.xy,r64.xy\n"
"umul r67.x,r36.x,r17.x\n"
"umul r72.x,r67.x,r35.x\n"
"mov r77.x,r72.x\n"
"iadd r78.x,r77.x,cb1[3].x\n"
"mov r81.x,r78.x\n"
"umul r82.x,r36.x,r17.x\n"
"iadd r87.x,r81.x,r82.x\n"
"mov r92.x,r87.x\n"
"umul r93.x,cb1[14].x,cb1[11].x\n"
"iadd r94.x,r93.x,r31.x\n"
"mov r97.x,r94.x\n"
"umul r98.x,r36.x,r97.x\n"
"iadd r103.x,r98.x,cb1[4].x\n"
"mov r106.x,r103.x\n"
"umul r107.x,r38.x,r97.x\n"
"iadd r112.x,r107.x,cb1[5].x\n"
"mov r115.x,r112.x\n"
"umul r116.x,r31.x,cb1[10].x\n"
"iadd r119.x,r116.x,r35.x\n"
"mov r123.x,r119.x\n"
";Read Trig\n"
"uav_raw_load_id(%d) r124.xyzw,r106.x\n"
"mov r125.xyzw,r124.xyzw\n"
"mov r128,r125\n"
"uav_raw_load_id(%d) r129.xy__,r115.x\n"
"mov r130.xy__,r129.xy00\n"
"mov r133.xy,r130.xy\n"
";read old values\n"
"mov r134.x,l2.x\n"
"umul r136.x,r134.x,r123.x\n"
"iadd r141.x,r136.x,cb1[0].x\n"
"uav_raw_load_id(%d) r144.xyzw,r141.x\n"
"mov r145.xyzw,r144.xyzw\n"
"mov r148,r145\n"
"umul r149.x,cb1[10].x,cb1[11].x\n"
"mov r150.x,r149.x\n"
"mov r151,l0\n"
"mov r153.x,l0.x\n"
"mov r165.x,l2.x\n"
"umul r155.x,r153.x,r150.x\n"
"iadd r160.x,r123.x,r155.x\n"
"umul r167.x,r165.x,r160.x\n"
"iadd r173.x,r167.x,cb1[1].x\n"
"uav_raw_load_id(%d) r178.xyzw,r173.x\n"
"mov r179.xyzw,r178.xyzw\n"
"mov r151,r179\n"
"mov r184,r151\n"
"mov r185,l0\n"
"mov r187.x,l4.x\n"
"mov r199.x,l2.x\n"
"umul r189.x,r187.x,r150.x\n"
"iadd r194.x,r123.x,r189.x\n"
"umul r201.x,r199.x,r194.x\n"
"iadd r207.x,r201.x,cb1[1].x\n"
"uav_raw_load_id(%d) r212.xyzw,r207.x\n"
"mov r213.xyzw,r212.xyzw\n"
"mov r185,r213\n"
"mov r218,r185\n"
"mov r219,r184\n"
"mov r220,l0\n"
"mov r222.x,l5.x\n"
"mov r234.x,l2.x\n"
"umul r224.x,r222.x,r150.x\n"
"iadd r229.x,r123.x,r224.x\n"
"umul r236.x,r234.x,r229.x\n"
"iadd r242.x,r236.x,cb1[1].x\n"
"uav_raw_load_id(%d) r247.xyzw,r242.x\n"
"mov r248.xyzw,r247.xyzw\n"
"mov r220,r248\n"
"mov r253,r220\n"
"mov r254,r219\n"
"mov r255,r218\n"
"mov r256,l0\n"
"mov r258.x,l6.x\n"
"mov r270.x,l2.x\n"
"umul r260.x,r258.x,r150.x\n"
"iadd r265.x,r123.x,r260.x\n"
"umul r272.x,r270.x,r265.x\n"
"iadd r278.x,r272.x,cb1[1].x\n"
"uav_raw_load_id(%d) r283.xyzw,r278.x\n"
"mov r284.xyzw,r283.xyzw\n"
"mov r256,r284\n"
"mov r289,r256\n"
"whileloop\n"
"uav_raw_load_id(%d) r290.xyzw,r81.x\n"
"mov r291.xyzw,r290.xyzw\n"
"mov r294,r291\n"
";coordinate conversion\n"
"dmad r301.xy,r294.xy,r128.xy,cb3[2].xy\n"
"mov r304.xy,r301.xy\n"
"dmul r311.xy,r294.xy,r128.zw\n"
"mov r314.xy,r311.xy\n"
"dmul r318.xy,r294.xy,r133.xy\n"
"mov r322.xy,r318.xy\n"
";x^2 + y^2 + z^2 / q^2\n"
"dmul r323.xy,r304.xy,r304.xy\n"
"mov r328.xy,r323.xy\n"
"dmad r329.xy,r314.xy,r314.xy,r328.xy\n"
"mov r336.xy,r329.xy\n"
"dmul r337.xy,r322.xy,r322.xy\n"
"mov r342.xy,r337.xy\n"
"dmad r343.xy,cb3[3].xy,r342.xy,r336.xy\n"
"mov r348.xy,r343.xy\n"
";sqrt()\n"
"mov r349.xy,r348.xy\n"
"mov r352,r349.xy\n"
"call 1\n"
"mov r350.xy,r351\n"
"mov r349.xy,r352\n"
"dadd r403.xy,r350.xy,cb3[2].zw\n"
"mov r406.xy,r403.xy\n"
";qw_r3_N / (rg *rs^3)\n"
"dmul r407.xy,r350.xy,r406.xy\n"
"dmul r412.xy,r407.xy,r406.xy\n"
"dmul r417.xy,r412.xy,r406.xy\n"
"mov r423.xy,r417.xy\n"
"mov r427.xy,r294.zw\n"
"mov r430,r427.xy\n"
"mov r431,r423.xy\n"
"call 2\n"
"mov r428.xy,r429\n"
"mov r427.xy,r430\n"
"mov r423.xy,r431\n"
"dadd r485.xy,r50.xy,r428.xy\n"
"mov r50.xy,r485.xy\n"
";stream loops\n"
";Begin stream\n"
";x - c\n"
"dadd r495.xy,r304.xy,cb4[0].zw_neg(y)\n"
"mov r498.xy,r495.xy\n"
"dadd r500.xy,r314.xy,cb4[1].zw_neg(y)\n"
"mov r503.xy,r500.xy\n"
"dadd r505.xy,r322.xy,cb4[2].zw_neg(y)\n"
"mov r508.xy,r505.xy\n"
";a . x\n"
"dmul r510.xy,cb4[0].xy,r498.xy\n"
"mov r513.xy,r510.xy\n"
"dmad r515.xy,cb4[1].xy,r503.xy,r513.xy\n"
"mov r513.xy,r515.xy\n"
"dmad r521.xy,cb4[2].xy,r508.xy,r513.xy\n"
"mov r513.xy,r521.xy\n"
";xs += dotted * (-a)\n"
"mov r527.xy,cb4[0].xy_neg(y)\n"
"dmad r528.xy,r513.xy,r527.xy,r498.xy\n"
"mov r498.xy,r528.xy\n"
"mov r534.xy,cb4[1].xy_neg(y)\n"
"dmad r535.xy,r513.xy,r534.xy,r503.xy\n"
"mov r503.xy,r535.xy\n"
"mov r541.xy,cb4[2].xy_neg(y)\n"
"dmad r542.xy,r513.xy,r541.xy,r508.xy\n"
"mov r508.xy,r542.xy\n"
";sqrv\n"
"dmul r547.xy,r498.xy,r498.xy\n"
"mov r552.xy,r547.xy\n"
"dmad r553.xy,r503.xy,r503.xy,r552.xy\n"
"mov r552.xy,r553.xy\n"
"dmad r560.xy,r508.xy,r508.xy,r552.xy\n"
"mov r552.xy,r560.xy\n"
";sqrv *= -sigma_sq2_inv\n"
"mov r567.xy,cb4[3].xy_neg(y)\n"
"dmul r568.xy,r552.xy,r567.xy\n"
"mov r552.xy,r568.xy\n"
";increment stream integral\n"
"mov r571.xy,r552.xy\n"
"mov r574,r571.xy\n"
"call 3\n"
"mov r572.xy,r573\n"
"mov r571.xy,r574\n"
"dmad r717.xy,r294.zw,r572.xy,r62.xy\n"
"mov r62.xy,r717.xy\n"
";Begin stream\n"
";x - c\n"
"dadd r728.xy,r304.xy,cb4[4].zw_neg(y)\n"
"mov r731.xy,r728.xy\n"
"dadd r733.xy,r314.xy,cb4[5].zw_neg(y)\n"
"mov r736.xy,r733.xy\n"
"dadd r738.xy,r322.xy,cb4[6].zw_neg(y)\n"
"mov r741.xy,r738.xy\n"
";a . x\n"
"dmul r743.xy,cb4[4].xy,r731.xy\n"
"mov r746.xy,r743.xy\n"
"dmad r748.xy,cb4[5].xy,r736.xy,r746.xy\n"
"mov r746.xy,r748.xy\n"
"dmad r754.xy,cb4[6].xy,r741.xy,r746.xy\n"
"mov r746.xy,r754.xy\n"
";xs += dotted * (-a)\n"
"mov r760.xy,cb4[4].xy_neg(y)\n"
"dmad r761.xy,r746.xy,r760.xy,r731.xy\n"
"mov r731.xy,r761.xy\n"
"mov r767.xy,cb4[5].xy_neg(y)\n"
"dmad r768.xy,r746.xy,r767.xy,r736.xy\n"
"mov r736.xy,r768.xy\n"
"mov r774.xy,cb4[6].xy_neg(y)\n"
"dmad r775.xy,r746.xy,r774.xy,r741.xy\n"
"mov r741.xy,r775.xy\n"
";sqrv\n"
"dmul r780.xy,r731.xy,r731.xy\n"
"mov r785.xy,r780.xy\n"
"dmad r786.xy,r736.xy,r736.xy,r785.xy\n"
"mov r785.xy,r786.xy\n"
"dmad r793.xy,r741.xy,r741.xy,r785.xy\n"
"mov r785.xy,r793.xy\n"
";sqrv *= -sigma_sq2_inv\n"
"mov r800.xy,cb4[7].xy_neg(y)\n"
"dmul r801.xy,r785.xy,r800.xy\n"
"mov r785.xy,r801.xy\n"
";increment stream integral\n"
"mov r804.xy,r785.xy\n"
"mov r574,r804.xy\n"
"call 3\n"
"mov r805.xy,r573\n"
"mov r804.xy,r574\n"
"dmad r948.xy,r294.zw,r805.xy,r63.xy\n"
"mov r63.xy,r948.xy\n"
";Begin stream\n"
";x - c\n"
"dadd r959.xy,r304.xy,cb4[8].zw_neg(y)\n"
"mov r962.xy,r959.xy\n"
"dadd r964.xy,r314.xy,cb4[9].zw_neg(y)\n"
"mov r967.xy,r964.xy\n"
"dadd r969.xy,r322.xy,cb4[10].zw_neg(y)\n"
"mov r972.xy,r969.xy\n"
";a . x\n"
"dmul r974.xy,cb4[8].xy,r962.xy\n"
"mov r977.xy,r974.xy\n"
"dmad r979.xy,cb4[9].xy,r967.xy,r977.xy\n"
"mov r977.xy,r979.xy\n"
"dmad r985.xy,cb4[10].xy,r972.xy,r977.xy\n"
"mov r977.xy,r985.xy\n"
";xs += dotted * (-a)\n"
"mov r991.xy,cb4[8].xy_neg(y)\n"
"dmad r992.xy,r977.xy,r991.xy,r962.xy\n"
"mov r962.xy,r992.xy\n"
"mov r998.xy,cb4[9].xy_neg(y)\n"
"dmad r999.xy,r977.xy,r998.xy,r967.xy\n"
"mov r967.xy,r999.xy\n"
"mov r1005.xy,cb4[10].xy_neg(y)\n"
"dmad r1006.xy,r977.xy,r1005.xy,r972.xy\n"
"mov r972.xy,r1006.xy\n"
";sqrv\n"
"dmul r1011.xy,r962.xy,r962.xy\n"
"mov r1016.xy,r1011.xy\n"
"dmad r1017.xy,r967.xy,r967.xy,r1016.xy\n"
"mov r1016.xy,r1017.xy\n"
"dmad r1024.xy,r972.xy,r972.xy,r1016.xy\n"
"mov r1016.xy,r1024.xy\n"
";sqrv *= -sigma_sq2_inv\n"
"mov r1031.xy,cb4[11].xy_neg(y)\n"
"dmul r1032.xy,r1016.xy,r1031.xy\n"
"mov r1016.xy,r1032.xy\n"
";increment stream integral\n"
"mov r1035.xy,r1016.xy\n"
"mov r574,r1035.xy\n"
"call 3\n"
"mov r1036.xy,r573\n"
"mov r1035.xy,r574\n"
"dmad r1179.xy,r294.zw,r1036.xy,r61.xy\n"
"mov r61.xy,r1179.xy\n"
";Begin stream\n"
";x - c\n"
"dadd r1190.xy,r304.xy,cb4[12].zw_neg(y)\n"
"mov r1193.xy,r1190.xy\n"
"dadd r1195.xy,r314.xy,cb4[13].zw_neg(y)\n"
"mov r1198.xy,r1195.xy\n"
"dadd r1200.xy,r322.xy,cb4[14].zw_neg(y)\n"
"mov r1203.xy,r1200.xy\n"
";a . x\n"
"dmul r1205.xy,cb4[12].xy,r1193.xy\n"
"mov r1208.xy,r1205.xy\n"
"dmad r1210.xy,cb4[13].xy,r1198.xy,r1208.xy\n"
"mov r1208.xy,r1210.xy\n"
"dmad r1216.xy,cb4[14].xy,r1203.xy,r1208.xy\n"
"mov r1208.xy,r1216.xy\n"
";xs += dotted * (-a)\n"
"mov r1222.xy,cb4[12].xy_neg(y)\n"
"dmad r1223.xy,r1208.xy,r1222.xy,r1193.xy\n"
"mov r1193.xy,r1223.xy\n"
"mov r1229.xy,cb4[13].xy_neg(y)\n"
"dmad r1230.xy,r1208.xy,r1229.xy,r1198.xy\n"
"mov r1198.xy,r1230.xy\n"
"mov r1236.xy,cb4[14].xy_neg(y)\n"
"dmad r1237.xy,r1208.xy,r1236.xy,r1203.xy\n"
"mov r1203.xy,r1237.xy\n"
";sqrv\n"
"dmul r1242.xy,r1193.xy,r1193.xy\n"
"mov r1247.xy,r1242.xy\n"
"dmad r1248.xy,r1198.xy,r1198.xy,r1247.xy\n"
"mov r1247.xy,r1248.xy\n"
"dmad r1255.xy,r1203.xy,r1203.xy,r1247.xy\n"
"mov r1247.xy,r1255.xy\n"
";sqrv *= -sigma_sq2_inv\n"
"mov r1262.xy,cb4[15].xy_neg(y)\n"
"dmul r1263.xy,r1247.xy,r1262.xy\n"
"mov r1247.xy,r1263.xy\n"
";increment stream integral\n"
"mov r1266.xy,r1247.xy\n"
"mov r574,r1266.xy\n"
"call 3\n"
"mov r1267.xy,r573\n"
"mov r1266.xy,r574\n"
"dmad r1410.xy,r294.zw,r1267.xy,r66.xy\n"
"mov r66.xy,r1410.xy\n"
";End streams\n"
"iadd r1416.x,r81.x,r36.x\n"
"mov r81.x,r1416.x\n"
"uge r1421.x,r81.x,r92.x\n"
"break_logicalnz r1421.x\n"
"endloop\n"
"umul r1426.x,r36.x,r35.x\n"
"iadd r1431.x,r1426.x,cb1[2].x\n"
"uav_raw_load_id(%d) r1434.xyzw,r1431.x\n"
"mov r1435.xyzw,r1434.xyzw\n"
"dmul r1441.xy,cb1[13].xy,r1435.xy\n"
"mov r1444.xy,r1441.xy\n"
";multiply V_reff_xr_rp3 with Kahan summation\n"
"dmul r1445.xy,r50.xy,r1444.xy\n"
"mov r50.xy,r1445.xy\n"
"mov r1450.xy,r50.xy\n"
"mov r1451,r148\n"
"dadd r1455.xy,r1450.xy,r1451.zw\n"
"mov r1459.xy,r1455.xy\n"
"dadd r1463.xy,r1451.xy,r1459.xy\n"
"mov r1467.xy,r1463.xy\n"
"dadd r1471.xy,r1467.xy,r1451.xy_neg(y)\n"
"dadd r1475.xy,r1459.xy,r1471.xy_neg(y)\n"
"mov r1451.__zw,r1475.00xy\n"
"mov r1451.xy__,r1467.xy00\n"
"mov r1486,r1451\n"
"mov r148,r1486\n"
"mov r1487,r148\n"
"dmul r1488.xy,r62.xy,r1444.xy\n"
"mov r62.xy,r1488.xy\n"
"mov r1493.xy,r62.xy\n"
"mov r1494,r254\n"
"dadd r1498.xy,r1493.xy,r1494.zw\n"
"mov r1502.xy,r1498.xy\n"
"dadd r1506.xy,r1494.xy,r1502.xy\n"
"mov r1510.xy,r1506.xy\n"
"dadd r1514.xy,r1510.xy,r1494.xy_neg(y)\n"
"dadd r1518.xy,r1502.xy,r1514.xy_neg(y)\n"
"mov r1494.__zw,r1518.00xy\n"
"mov r1494.xy__,r1510.xy00\n"
"mov r1529,r1494\n"
"mov r254,r1529\n"
"mov r1530,r254\n"
"dmul r1531.xy,r63.xy,r1444.xy\n"
"mov r63.xy,r1531.xy\n"
"mov r1536.xy,r63.xy\n"
"mov r1537,r255\n"
"dadd r1541.xy,r1536.xy,r1537.zw\n"
"mov r1545.xy,r1541.xy\n"
"dadd r1549.xy,r1537.xy,r1545.xy\n"
"mov r1553.xy,r1549.xy\n"
"dadd r1557.xy,r1553.xy,r1537.xy_neg(y)\n"
"dadd r1561.xy,r1545.xy,r1557.xy_neg(y)\n"
"mov r1537.__zw,r1561.00xy\n"
"mov r1537.xy__,r1553.xy00\n"
"mov r1572,r1537\n"
"mov r255,r1572\n"
"mov r1573,r255\n"
"dmul r1574.xy,r61.xy,r1444.xy\n"
"mov r61.xy,r1574.xy\n"
"mov r1579.xy,r61.xy\n"
"mov r1580,r253\n"
"dadd r1584.xy,r1579.xy,r1580.zw\n"
"mov r1588.xy,r1584.xy\n"
"dadd r1592.xy,r1580.xy,r1588.xy\n"
"mov r1596.xy,r1592.xy\n"
"dadd r1600.xy,r1596.xy,r1580.xy_neg(y)\n"
"dadd r1604.xy,r1588.xy,r1600.xy_neg(y)\n"
"mov r1580.__zw,r1604.00xy\n"
"mov r1580.xy__,r1596.xy00\n"
"mov r1615,r1580\n"
"mov r253,r1615\n"
"mov r1616,r253\n"
"dmul r1617.xy,r66.xy,r1444.xy\n"
"mov r66.xy,r1617.xy\n"
"mov r1622.xy,r66.xy\n"
"mov r1623,r289\n"
"dadd r1627.xy,r1622.xy,r1623.zw\n"
"mov r1631.xy,r1627.xy\n"
"dadd r1635.xy,r1623.xy,r1631.xy\n"
"mov r1639.xy,r1635.xy\n"
"dadd r1643.xy,r1639.xy,r1623.xy_neg(y)\n"
"dadd r1647.xy,r1631.xy,r1643.xy_neg(y)\n"
"mov r1623.__zw,r1647.00xy\n"
"mov r1623.xy__,r1639.xy00\n"
"mov r1658,r1623\n"
"mov r289,r1658\n"
"mov r1659,r289\n"
";Output\n"
"mov r1660.x,l2.x\n"
"umul r1662.x,r1660.x,r123.x\n"
"iadd r1667.x,r1662.x,cb1[0].x\n"
"uav_raw_store_id(%d) mem.xyzw,r1667.x,r148\n"
"mov r1674.x,l0.x\n"
"mov r1686.x,l2.x\n"
"umul r1676.x,r1674.x,r150.x\n"
"iadd r1681.x,r123.x,r1676.x\n"
"umul r1688.x,r1686.x,r1681.x\n"
"iadd r1694.x,r1688.x,cb1[1].x\n"
"uav_raw_store_id(%d) mem.xyzw,r1694.x,r254\n"
"mov r1705.x,l4.x\n"
"mov r1717.x,l2.x\n"
"umul r1707.x,r1705.x,r150.x\n"
"iadd r1712.x,r123.x,r1707.x\n"
"umul r1719.x,r1717.x,r1712.x\n"
"iadd r1725.x,r1719.x,cb1[1].x\n"
"uav_raw_store_id(%d) mem.xyzw,r1725.x,r255\n"
"mov r1736.x,l5.x\n"
"mov r1748.x,l2.x\n"
"umul r1738.x,r1736.x,r150.x\n"
"iadd r1743.x,r123.x,r1738.x\n"
"umul r1750.x,r1748.x,r1743.x\n"
"iadd r1756.x,r1750.x,cb1[1].x\n"
"uav_raw_store_id(%d) mem.xyzw,r1756.x,r253\n"
"mov r1767.x,l6.x\n"
"mov r1779.x,l2.x\n"
"umul r1769.x,r1767.x,r150.x\n"
"iadd r1774.x,r123.x,r1769.x\n"
"umul r1781.x,r1779.x,r1774.x\n"
"iadd r1787.x,r1781.x,cb1[1].x\n"
"uav_raw_store_id(%d) mem.xyzw,r1787.x,r289\n"
"endif\n"
"endmain\n"
"func 2\n"
";div_custom\n"
"d2f r432.x,r431.xy\n"
"mov r435.x,r432.x\n"
"mov r436.x,r435.x\n"
"rcp r437.x___,r436.xxxx\n"
"mov r440.x,r437.x\n"
"f2d r441.xy,r440.x\n"
"mov r444.xy,r441.xy\n"
"mov r445.xy,r431.xy_neg(y)\n"
"dmad r449.xy,r445.xy,r444.xy,l10.xy\n"
"mov r453.xy,r449.xy\n"
"dmad r454.xy,r444.xy,r453.xy,r444.xy\n"
"mov r461.xy,r454.xy\n"
"dmul r462.xy,r430.xy,r461.xy\n"
"mov r467.xy,r462.xy\n"
"mov r468.xy,r431.xy_neg(y)\n"
"dmad r471.xy,r468.xy,r467.xy,r430.xy\n"
"mov r477.xy,r471.xy\n"
"dmad r478.xy,r477.xy,r461.xy,r467.xy\n"
"mov r429.xy,r478.xy\n"
"ret\n"
"endfunc\n"
"func 1\n"
";sqrt_custom\n"
"d2f r353.x,r352.xy\n"
"mov r356.x,r353.x\n"
"rsq r357.x___,r356.xxxx\n"
"mov r360.x,r357.x\n"
"mov r361.x,r360.x_neg(x)\n"
"f2d r364.xy,r361.x\n"
"mov r366.xy,r364.xy\n"
"dmul r367.xy,r366.xy,r366.xy\n"
"mov r372.xy,r367.xy\n"
"dmad r374.xy,r352.xy,r372.xy,l7.xy\n"
"mov r372.xy,r374.xy\n"
"dmul r379.xy,r366.xy,r372.xy\n"
"mov r366.xy,r379.xy\n"
"dmul r384.xy,r352.xy,r366.xy\n"
"mov r372.xy,r384.xy\n"
"dmul r389.xy,r366.xy,r372.xy\n"
"mov r366.xy,r389.xy\n"
"dmad r396.xy,r366.xy,l9.xy,l8.xy\n"
"dmul r399.xy,r372.xy,r396.xy\n"
"mov r351.xy,r399.xy\n"
"ret\n"
"endfunc\n"
"func 3\n"
";exp_custom\n"
"dmul r576.xy,r574.xy,l11.xy\n"
"mov r579.xy,r576.xy\n"
"dfrac r580.xy,r579.xy\n"
"mov r583.xy,r580.xy\n"
"dadd r584.xy,r579.xy,r583.xy_neg(y)\n"
"d2f r589.x, r584.xy\n"
"ftoi r590.x,r589.x\n"
"mov r593.x,r590.x\n"
"dadd r595.xy,r583.xy,l12.xy_neg(y)\n"
"mov r598.xy,r595.xy\n"
"dmul r599.xy,r598.xy,r598.xy\n"
"mov r604.xy,r599.xy\n"
"dmad r607.xy,r604.xy,l14.xy,l13.xy\n"
"mov r610.xy,r607.xy\n"
"dmad r612.xy,r604.xy,r610.xy,l15.xy\n"
"dmul r617.xy,r598.xy,r612.xy\n"
"mov r622.xy,r617.xy\n"
"dmad r625.xy,r604.xy,l17.xy,l16.xy\n"
"mov r628.xy,r625.xy\n"
"dmad r630.xy,r604.xy,r628.xy,l18.xy\n"
"mov r628.xy,r630.xy\n"
"dmad r636.xy,r604.xy,r628.xy,l10.xy\n"
"mov r628.xy,r636.xy\n"
"dmad r642.xy,r622.xy,l19.xy,r628.xy\n"
"mov r647.xy,r642.xy\n"
"mov r648.xy,r647.xy\n"
"mov r649.xy,r622.xy\n"
"mov r430,r649.xy\n"
"mov r431,r648.xy\n"
"call 2\n"
"mov r650.xy,r429\n"
"mov r649.xy,r430\n"
"mov r648.xy,r431\n"
"dmad r706.xy,r650.xy,l20.xy,l20.xy\n"
"mov r650.xy,r706.xy\n"
"dldexp r709.xy,r650.xy,r593.x\n"
"mov r573.xy,r709.xy\n"
"ret\n"
"endfunc\n"
"end\n";

